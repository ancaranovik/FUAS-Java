<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<HBox prefHeight="542.0" prefWidth="906.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="novik.MainController" stylesheets="@style.css">
    <!-- Map area: 70% -->
    <StackPane HBox.hgrow="ALWAYS" prefWidth="635.0">
        <Canvas fx:id="canvas" height="500" width="800" />
        <Pane fx:id="laneLayer" pickOnBounds="false" />
        <Pane fx:id="trafficLightLayer" pickOnBounds="false" />
        <Pane fx:id="carLayer" pickOnBounds="false" prefHeight="501.0" prefWidth="743.0" />
    </StackPane>
    <!-- Right panel: 30% -->
    <VBox prefWidth="271.0" spacing="10" styleClass="side-panel">
        <VBox spacing="8" styleClass="toolbar">
            <Button onAction="#pause" text="Pause" />
            <Button onAction="#resume" text="Resume" />
            <Separator />
            <Button fx:id="addVehicleBtn" text="Insert random vehicle" />
        </VBox>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" VBox.vgrow="ALWAYS">
            <content>
                <VBox spacing="0">
                    <!-- Traffic Light Panel -->
                    <VBox fx:id="tlsInfoBox" managed="false" spacing="10" visible="false" styleClass="tls-info-box">
                        <Label styleClass="section-title" text="Traffic Light Manager" />
                        <Separator />
                        <VBox spacing="5" styleClass="phase-list-box">
                            <HBox spacing="5">
                                <Label styleClass="label-bold" text="ID:" />
                                <Label fx:id="tlsIdLabel" text="None" />
                            </HBox>
                            <HBox spacing="5">
                                <Label styleClass="label-bold" text="Live State:" />
                                <Label fx:id="tlsStateLabel" styleClass="label-mono" text="---" />
                            </HBox>
                            <HBox spacing="5">
                                <Label styleClass="label-bold" text="Current Phase Index:" />
                                <Label fx:id="tlsPhaseLabel" text="0" />
                            </HBox>
                        </VBox>
                        <Separator />
                        <Label styleClass="section-subtitle" text="Phase Configuration" />
                        <Label styleClass="label-note" text="(Double click cells to edit)" />
                        <HBox spacing="10" styleClass="phase-header-row">
                            <Label minWidth="30" styleClass="label-grey" text="#" />
                            <Label maxWidth="Infinity" styleClass="label-grey" text="State String" HBox.hgrow="ALWAYS" />
                            <Label minWidth="60" styleClass="label-grey" text="Dur(s)" />
                        </HBox>
                        <ScrollPane fitToWidth="true" prefHeight="200">
                            <content>
                                <VBox fx:id="tlsPhasesContainer" spacing="5" />
                            </content>
                        </ScrollPane>
                        <Label fx:id="tlsFeedbackLabel" styleClass="label-feedback" text="" wrapText="true" />
                        <Separator />
                        <Label styleClass="label-note" text="Right Click Map Node: Next Phase" />
                    </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </VBox>
</HBox>
